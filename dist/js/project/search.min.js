function zeroToEmpty(e){return 0==e?"  ":e}function createList(e){for(var a=0;a<e.length;a++)$("#listWrap").append('<div class="siteSearch_list"><div class="project-show"><img src="../images/project/triangle.png" alt="三角图标" class="triangle"> <a href="./detail.html?School_name='+e[a].Id+'&whereFrom=search"><img src="../images/project/nsi_project.jpg" alt="热门项目" class="project-img"></a></div><p class="project-name">'+e[a].SubjectName+'</p> <a href="./detail.html?School_name='+e[a].Id+'&whereFrom=search"><p class="project-brief">'+e[a].SubjectIntroduction+'</p></a><div class="clearfix project-relese"><p class="fr"><span>发布单位：</span><span class="relese-name">'+e[a].Company+"</span></p></div></div>")}function searchProject(){var e=$("#searchContent").val();$.ajax({type:"get",async:!0,traditional:!0,data:{SearchKey:e,pageNum:1,OnePageNum:20},url:"http://"+changeUrl.address+"/Subject_api?whereFrom=count",dataType:"jsonp",jsonp:"Callback",success:function(e){console.log(e),$("#resultNum").text(e.countAllRS);var a=e.countAllRS;layui.use(["laypage"],function(){layui.laypage.render({elem:"pageDemo",count:a,limit:20,skin:"#1E9FFF",groups:1,prev:'<em class="layui-icon"> &#xe603; </em>',next:'<em class="layui-icon"> &#xe602; </em>',jump:function(a,r){$("#listWrap").html("");var t=$("#searchContent").val(),c={SearchKey:t,pageNum:a.curr,OnePageNum:20};0!=e.countAllRS&&myAjax(c,"http://"+changeUrl.address+"/Subject_api?whereFrom=search",createList)}})})},error:function(){alert("请求数据失败！")}})}function getQueryStringArgs(){var e=location.search.length>0?location.search.substring(1):"",a={},r=e.length?e.split("&"):[],t=null,c=null,n=null,s=0,l=r.length;for(s=0;s<l;s++)t=r[s].split("="),c=decodeURIComponent(t[0]),n=decodeURIComponent(t[1]),c=t[0],n=t[1],c.length&&(a[c]=n);return a}function initSearch(){var e=getQueryStringArgs(),a=decodeURIComponent(e.whereFrom),r={Subject_api:a,pageNum:1,OnePageNum:20};$("#searchContent").val(a),$("#listWrap").html(""),myAjax(r,"http://"+changeUrl.address+"/Subject_api?whereFrom=search",searchProject)}$(function(){searchScroll()}),$("#scroll02").click(function(){$("#searchBox").removeClass("hide"),$("html,body").animate({scrollTop:0},0)}),$("#goBack").click(function(){$("#searchBox").addClass("hide")}),$("#projectSearch").click(function(){$("#searchBox").addClass("hide"),searchProject()}),$(function(){initSearch()});