function getResumeInfo(){$.ajax({type:"get",async:!1,traditional:!0,data:{Id:$.cookie("username")},url:"http://"+changeUrl.address+"/talent_api?whereFrom=detail",dataType:"jsonp",jsonp:"Callback",success:function(e){console.log(e),$("#Name").val(e[0].Name),0==e[0].Sex?$("#optionsRadios2").attr("checked","checked"):$("#optionsRadios1").attr("checked","checked"),$("#Phone").val(e[0].Phone),$("#Mail").val(e[0].Mail),$("#Education").val(e[0].Education),$("#Major").val(e[0].Major),$("#NowWorkplace").val(e[0].NowWorkplace),$("#WorkYear").val(e[0].WorkYear),0==e[0].Public?$("#optionsRadios4").attr("checked","checked"):$("#optionsRadios3").attr("checked","checked"),$("#ExpectWorkPlace").val(e[0].ExpectWorkPlace),$("#ExpectWorkPosition").val(e[0].ExpectWorkPosition),$("#ExpectSalary").val(e[0].ExpectSalary),$("#Other").val(e[0].Other),$("#WorkExperience").val(e[0].WorkExperience),$("#EducationBackground").val(e[0].EducationBackground),$("#TrainingBackground").val(e[0].TrainingBackground)},error:function(){alert("网络繁忙，请稍后再试！")}})}function autoAddZero(e){return""==e?0:e}function checkName(){""==$("#Name").val()?($(".hasError").eq(0).addClass("has-error"),$(".hasError:eq(0) span").removeClass("hide"),$(".NameCheck").text("姓名不能为空"),$(".NameCheck").css("color","red"),checkNameResult=!1):($(".NameCheck").text(""),$(".hasError").eq(0).removeClass("has-error"),$(".hasError:eq(0) span").addClass("hide"),checkNameResult=!0)}function checkPhone(){""==$("#Phone").val()?($(".hasError").eq(2).addClass("has-error"),$(".hasError:eq(2) span").removeClass("hide"),$(".PhoneCheck").text("电话号码不能为空"),$(".PhoneCheck").css("color","red"),checkPhoneResult=!1):($(".PhoneCheck").text(""),$(".hasError").eq(2).removeClass("has-error"),$(".hasError:eq(2) span").addClass("hide"),checkPhoneResult=!0)}function checkMail(){""==$("#Mail").val()?($(".hasError").eq(3).addClass("has-error"),$(".hasError:eq(3) span").removeClass("hide"),$(".MailCheck").text("邮箱不能为空"),$(".MailCheck").css("color","red"),checkMailResult=!1):($(".MailCheck").text(""),$(".hasError").eq(3).removeClass("has-error"),$(".hasError:eq(3) span").addClass("hide"),checkMailResult=!0)}function checkEducation(){""==$("#Education").val()?($(".hasError").eq(4).addClass("has-error"),$(".hasError:eq(4) span").removeClass("hide"),$(".EducationCheck").text("最高学历不能为空"),$(".EducationCheck").css("color","red"),checkEducationResult=!1):($(".EducationCheck").text(""),$(".hasError").eq(4).removeClass("has-error"),$(".hasError:eq(4) span").addClass("hide"),checkEducationResult=!0)}function checkMajor(){""==$("#Major").val()?($(".hasError").eq(5).addClass("has-error"),$(".hasError:eq(5) span").removeClass("hide"),$(".MajorCheck").text("专业不能为空"),$(".MajorCheck").css("color","red"),checkMajorResult=!1):($(".MajorCheck").text(""),$(".hasError").eq(5).removeClass("has-error"),$(".hasError:eq(5) span").addClass("hide"),checkMajorResult=!0)}function checkNowWorkplace(){""==$("#NowWorkplace").val()?($(".hasError").eq(6).addClass("has-error"),$(".hasError:eq(6) span").removeClass("hide"),$(".NowWorkplaceCheck").text("工作单位不能为空"),$(".NowWorkplaceCheck").css("color","red"),checkNowWorkplaceResult=!1):($(".NowWorkplaceCheck").text(""),$(".hasError").eq(6).removeClass("has-error"),$(".hasError:eq(6) span").addClass("hide"),checkNowWorkplaceResult=!0)}function checkWorkYear(){var e=/^[1-9]\d*$/,a=$("#WorkYear").val();e.test(a)?($(".WorkYearCheck").text(""),$(".WorkYearCheck").css("color","#999"),$(".hasError").eq(7).removeClass("has-error"),$(".hasError:eq(7) span").addClass("hide"),checkWorkYearResult=!0):($(".hasError").eq(7).addClass("has-error"),$(".hasError:eq(7) span").removeClass("hide"),$(".WorkYearCheck").text("*必须为整数"),$(".WorkYearCheck").css("color","red"),checkWorkYearResult=!1)}function formSubmit(){checkName(),checkPhone(),checkMail(),checkEducation(),checkMajor(),checkNowWorkplace(),checkWorkYear();var e=$("#Sex input:radio:checked").val(),a=$("#Public input:radio:checked").val(),r=$.cookie("username");if(1==checkNameResult&&1==checkPhoneResult&&1==checkMailResult&&1==checkEducationResult&&1==checkNowWorkplaceResult&&1==checkWorkYearResult){var o={Name:autoAddZero($("#Name").val()),Sex:e,Phone:autoAddZero($("#Phone").val()),Mail:autoAddZero($("#Mail").val()),Education:autoAddZero($("#Education").val()),Major:autoAddZero($("#Major").val()),NowWorkplace:autoAddZero($("#NowWorkplace").val()),WorkYear:autoAddZero($("#WorkYear").val()),ExpectWorkPlace:autoAddZero($("#ExpectWorkPlace").val()),ExpectWorkPosition:autoAddZero($("#ExpectWorkPosition").val()),ExpectSalary:autoAddZero($("#ExpectSalary").val()),Other:autoAddZero($("#Other").val()),WorkExperience:autoAddZero($("#WorkExperience").val()),EducationBackground:autoAddZero($("#EducationBackground").val()),TrainingBackground:autoAddZero($("#TrainingBackground").val()),Public:a,UserMail:r};$.ajax({type:"get",async:!1,traditional:!0,data:o,url:"http://"+changeUrl.address+"/talent_api?whereFrom=insert",dataType:"jsonp",jsonp:"Callback",beforeSend:function(){$("#insertSubmit").text("提交数据中..."),$("#insertSubmit").addClass("disabled"),$("#insertSubmit").attr("onclick","javascript:void();")},success:function(e){console.log(e),$(".shadowWrap").removeClass("hide"),$("#autoJump").removeClass("hide"),1==e.msg?(setInterval(function(){alert("修改成功，可在用户中心查看"),window.location.href="./userinfo.html"},1e3),$("#insertSubmit").text("立即提交"),$("#insertSubmit").removeClass("disabled")):($("#insertSubmit").text("立即提交"),$("#insertSubmit").removeClass("disabled"),$("#insertSubmit").attr("onclick","formSubmit();"))},error:function(){alert("网络繁忙，请稍后再试！"),$("#insertSubmit").text("立即提交"),$("#insertSubmit").removeClass("disabled"),$("#insertSubmit").attr("onclick","formSubmit();")}})}else alert("数据格式有误，请重新输入")}var checkNameResult=null,checkPhoneResult=null,checkMailResult=null,checkEducationResult=null,checkNowWorkplaceResult=null,checkWorkYearResult=null;$(function(){getResumeInfo()});