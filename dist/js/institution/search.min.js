function zeroToEmpty(t){return 0==t?"  ":t}function createList(t){for(var e=0;e<t.length;e++){var n=t[e].Institution_logo&&0!=t[e].Institution_logo?"http://"+changeUrl.imgAddress+t[e].Institution_logo:"../images/public/nsi_nopic.png";$("#listWrap").append('<div class="siteSearch_list clearfix"><div class="fl"><a href="./detail.html?School_name='+t[e].Id+'&whereFrom=search"><img src="'+n+'" alt="机构" class="institution-img"></a></div><div class="fl institution-info"><a href="./detail.html?School_name='+t[e].Id+'&whereFrom=search"><h4 class="institution-name">'+zeroToEmpty(t[e].Name)+'</h4></a><p class="institution-lable">标签：<span>'+zeroToEmpty(t[e].Label)+'</span></p><p class="institution-type">类型：<span>'+zeroToEmpty(t[e].Type)+'</span></p><p class="institution-time">成立时间：<span>'+zeroToEmpty(t[e].Founded_time)+"</span></p></div></div>")}}function searchInstitution(){var t=$("#searchContent").val();$.ajax({type:"get",async:!0,traditional:!0,data:{Institution_searchKey:t,pageNum:1,OnePageNum:20},url:"http://"+changeUrl.address+"/Institution_api?whereFrom=count",dataType:"jsonp",jsonp:"Callback",success:function(t){console.log(t),$("#institutionNum").text(t.countAllRS);var e=t.countAllRS;layui.use(["laypage"],function(){layui.laypage.render({elem:"pageDemo",count:e,limit:20,skin:"#1E9FFF",groups:1,prev:'<em class="layui-icon"> &#xe603; </em>',next:'<em class="layui-icon"> &#xe602; </em>',jump:function(e,n){$("#listWrap").html("");var i=$("#searchContent").val(),a={Institution_searchKey:i,pageNum:e.curr,OnePageNum:20};0!=t.countAllRS&&myAjax(a,"http://"+changeUrl.address+"/Institution_api?whereFrom=search",createList)}})})},error:function(){alert("请求数据失败！")}})}function getQueryStringArgs(){var t=location.search.length>0?location.search.substring(1):"",e={},n=t.length?t.split("&"):[],i=null,a=null,o=null,s=0,r=n.length;for(s=0;s<r;s++)i=n[s].split("="),a=decodeURIComponent(i[0]),o=decodeURIComponent(i[1]),a=i[0],o=i[1],a.length&&(e[a]=o);return e}function initSearch(){var t=getQueryStringArgs(),e=decodeURIComponent(t.whereFrom),n={Institution_searchKey:e,pageNum:1,OnePageNum:20};$("#searchContent").val(e),$("#listWrap").html(""),myAjax(n,"http://"+changeUrl.address+"/Institution_api?whereFrom=search",searchInstitution)}$(function(){searchScroll()}),$("#scroll02").click(function(){$("#searchBox").removeClass("hide"),$("html,body").animate({scrollTop:0},0)}),$("#goBack").click(function(){$("#searchBox").addClass("hide")}),$("#institutionSearch").click(function(){$("#searchBox").addClass("hide"),searchInstitution()}),$(function(){initSearch()});