function zeroToEmpty(e){return 0==e?"  ":e}function createList(e){for(var a=0;a<e.length;a++){var c=e[a].School_logo?"http://"+changeUrl.imgAddress+e[a].School_logo:"../images/public/nsi_nopic.png";$("#listWrap").append('<div class="siteSearch_list clearfix"><div class="fl"><a href="./detail.html?School_name='+e[a].Id+'&whereFrom=search"><img src="'+c+'" alt="学校" class="school-img"></a></div><div class="fl school-info"><a href="./detail.html?School_name='+e[a].Id+'&whereFrom=search"><h4 class="school-name">'+zeroToEmpty(e[a].School_name)+'</h4></a><p class="school-type">学制：<span>'+zeroToEmpty(e[a].School_system)+'</span></p><p class="school-course">课程：<span>'+zeroToEmpty(e[a].Course)+'</span></p><p class="school-course">类型：<span>'+zeroToEmpty(e[a].School_properties)+"</span></p></div></div>")}}function searchSchool(){var e=$("#searchContent").val();$.ajax({type:"get",async:!0,traditional:!0,data:{School_searchKey:e,pageNum:1,OnePageNum:20},url:"http://"+changeUrl.address+"/School_api?whereFrom=count",dataType:"jsonp",jsonp:"Callback",success:function(e){console.log(e),$("#schoolNum").text(e.countAllRS);var a=e.countAllRS;layui.use(["laypage"],function(){layui.laypage.render({elem:"pageDemo",count:a,skin:"#1E9FFF",groups:1,prev:'<em class="layui-icon"> &#xe603; </em>',next:'<em class="layui-icon"> &#xe602; </em>',jump:function(a,c){$("#listWrap").html("");var o=$("#searchContent").val(),l={School_searchKey:o,pageNum:a.curr,OnePageNum:20};0!=e.countAllRS&&myAjax(l,"http://"+changeUrl.address+"/School_api?whereFrom=search",createList)}})})},error:function(){alert("请求数据失败！")}})}function advanceSearch(){$("#listWrap").html("");var e=["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],a=["0","0","0","0"],c=["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],o=(""==$("#buildSchoolTime").val()?0:$("#buildSchoolTime").val()).toString();$("#AdvanDivID01 input:checkbox:checked").each(function(){e[$(this).val()-1]=$(this).val()}),$("#AdvanDivID02 input:checkbox:checked").each(function(){a[$(this).val()-1]=$(this).val()}),$("#AdvanDivID03 input:checkbox:checked").each(function(){c[$(this).val()-1]=$(this).val()}),$.ajax({type:"get",async:!0,traditional:!0,dataType:"jsonp",data:{area:e,system:a,course:c,Founded_time:o},jsonp:"Callback",url:"http://"+changeUrl.address+"/School_api?whereFrom=AdvancedSearchCount",success:function(e){console.log(e),$("#schoolNum").text(e.countAllRS);var a=e.countAllRS;layui.use(["laypage"],function(){layui.laypage.render({elem:"pageDemo",count:a,skin:"#1E9FFF",limit:20,groups:1,prev:'<em class="layui-icon"> &#xe603; </em>',next:'<em class="layui-icon"> &#xe602; </em>',jump:function(a,c){$("#listWrap").html("");var o=$("#searchContent").val(),l={School_searchKey:o,pageNum:a.curr,OnePageNum:20};0!=e.countAllRS&&myAjax(l,"http://"+changeUrl.address+"/School_api?whereFrom=search",createList)}})})},error:function(){alert("请求数据失败")}})}function getQueryStringArgs(){var e=location.search.length>0?location.search.substring(1):"",a={},c=e.length?e.split("&"):[],o=null,l=null,s=null,n=0,r=c.length;for(n=0;n<r;n++)o=c[n].split("="),l=decodeURIComponent(o[0]),s=decodeURIComponent(o[1]),l=o[0],s=o[1],l.length&&(a[l]=s);return a}function initSearch(){var e=getQueryStringArgs(),a=decodeURIComponent(e.whereFrom),c={School_searchKey:a,pageNum:1,OnePageNum:20};$("#searchContent").val(a),$("#listWrap").html(""),myAjax(c,"http://"+changeUrl.address+"/School_api?whereFrom=search",searchSchool)}$(function(){searchScroll()}),$(".clickForMore").click(function(){$(".moreArea").css("display","block"),$(".clickForSlidedown").css("display","block"),$(".baseArea").css("display","none"),$(this).css("display","none"),$("#AdvanceResetID").trigger("click")}),$(".clickForSlidedown").click(function(){$(".moreArea").css("display","none"),$(".clickForMore").css("display","block"),$(".baseArea").css("display","block"),$(this).css("display","none"),$("#AdvanceResetID").trigger("click")}),$("#scroll02").click(function(){$("#searchBox").removeClass("hide"),$("html,body").animate({scrollTop:0},0)}),$("#goBack").click(function(){$("#searchBox").addClass("hide")}),$("#goSearch").click(function(){$("#searchBox").addClass("hide"),searchSchool()}),$("#AdvanceSubmitID").click(function(){return $("#searchBox").addClass("hide"),advanceSearch(),!1}),$(function(){initSearch()});